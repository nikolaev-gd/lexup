# Описание сущностей системы LexUp

Этот документ описывает основные сущности системы LexUp, их атрибуты, взаимосвязи и роль в приложении.

## 1. User (Пользователь)

### Описание
Представляет зарегистрированного пользователя приложения LexUp.

### Атрибуты
- `id` (String): Уникальный идентификатор пользователя
- `email` (String): Электронная почта пользователя
- `displayName` (String): Отображаемое имя пользователя
- `createdAt` (DateTime): Дата и время создания аккаунта

### Связи
- Один пользователь может иметь множество Content (контента)
- Один пользователь может иметь множество Card (карточек)

### Хранение
Информация о пользователе хранится в Firebase Authentication и Firestore.

### Методы
- `createUser()`: Создание нового пользователя
- `updateUserProfile()`: Обновление профиля пользователя
- `getUserContent()`: Получение контента пользователя

## 2. Content (Контент)

### Описание
Представляет текст или ссылку, добавленные пользователем для изучения.

### Атрибуты
- `id` (String): Уникальный идентификатор контента
- `userId` (String): ID пользователя, которому принадлежит контент
- `text` (String): Текст контента
- `link` (String): Ссылка на внешний ресурс (если есть)
- `createdAt` (DateTime): Дата и время создания контента
- `updatedAt` (DateTime): Дата и время последнего обновления контента

### Связи
- Принадлежит одному User (пользователю)
- Может иметь множество Card (карточек)

### Хранение
Хранится в Firestore в коллекции `users/{userId}/content`.

### Методы
- `addContent()`: Добавление нового контента
- `updateContent()`: Обновление существующего контента
- `deleteContent()`: Удаление контента
- `simplifyContent()`: Упрощение текста контента с использованием AI

## 3. Card (Карточка)

### Описание
Представляет карточку для изучения слова или фразы, созданную на основе контента.

### Атрибуты
- `id` (String): Уникальный идентификатор карточки
- `contentId` (String): ID связанного контента
- `userId` (String): ID пользователя, которому принадлежит карточка
- `word` (String): Изучаемое слово или фраза
- `extractedPhrase` (String): Извлеченная фраза из контекста
- `originalSentence` (String): Оригинальное предложение из контекста
- `briefDefinition` (String): Краткое определение
- `commonCollocations` (String): Распространенные словосочетания
- `exampleSentence` (String): Пример использования
- `createdAt` (DateTime): Дата и время создания карточки

### Связи
- Принадлежит одному User (пользователю)
- Связана с одним Content (контентом)

### Хранение
Хранится в Firestore в коллекции `users/{userId}/content/{contentId}/cards`.

### Методы
- `createCard()`: Создание новой карточки
- `updateCard()`: Обновление существующей карточки
- `deleteCard()`: Удаление карточки
- `getCardInfo()`: Получение информации о карточке

## Взаимодействие сущностей

1. Когда пользователь (User) добавляет новый контент, создается новая сущность Content, связанная с этим пользователем.

2. При работе с контентом пользователь может создавать карточки (Card) для изучения отдельных слов или фраз. Каждая карточка связана как с пользователем, так и с конкретным контентом.

3. При удалении контента также удаляются все связанные с ним карточки.

4. Пользователь может просматривать, редактировать и удалять свой контент и карточки.

## Диаграмма связей

```
+------+       1:N      +----------+     1:N     +------+
| User | -------------- | Content  | ----------- | Card |
+------+                +----------+             +------+
   |                         |                      |
   |        1:N              |         1:N          |
   +------------------------+----------------------+
```

Эта диаграмма показывает, что один пользователь (User) может иметь множество единиц контента (Content), а каждая единица контента может иметь множество карточек (Card). При этом каждая карточка напрямую связана с пользователем и с конкретной единицей контента.

## Заключение

Эти три основные сущности (User, Content, Card) формируют ядро системы LexUp. Они обеспечивают структуру для хранения и управления пользовательскими данными, контентом для изучения и карточками слов.
